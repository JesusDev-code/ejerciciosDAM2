<ion-header [translucent]="true">
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>ðŸ“” Mis Diarios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Imagen de cabecera -->
  <div class="header-container">
    <img 
      src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=800" 
      alt="Libro de diarios"
      class="header-image">
  </div>

  <!-- BotÃ³n de carga -->
  <ion-button 
    expand="block" 
    color="secondary"
    (click)="loadData()"
    class="action-button">
    <ion-icon slot="start" name="cloud-download-outline"></ion-icon>
    Cargar Mis Diarios desde Render
  </ion-button>

  <!-- Pull to refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="refreshData($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Contador de resultados -->
  <ion-item *ngIf="items.length > 0" lines="none" class="counter-item">
    <ion-label>
      <h2>{{ totalElements }} diario(s) encontrado(s)</h2>
    </ion-label>
  </ion-item>

  <!-- Lista de diarios -->
  <div *ngIf="items && items.length > 0">
    <ion-card *ngFor="let item of items" class="data-card">
      <!-- Icono de visibilidad (igual que Diario.kt) -->
      <ion-card-header>
        <ion-card-subtitle>
          <ion-icon 
            [name]="item.visibilidad === 'PUBLICO' ? 'globe-outline' : 'lock-closed-outline'" 
            [color]="item.visibilidad === 'PUBLICO' ? 'success' : 'medium'">
          </ion-icon>
          {{ item.visibilidad }} â€¢ {{ item.usuarioNombre || 'Usuario desconocido' }}
        </ion-card-subtitle>
        <ion-card-title>{{ item.titulo }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <p>{{ item.contenido }}</p>
        
        <ion-list lines="none" class="detail-list">
          <!-- Tema -->
          <ion-item *ngIf="item.temaTitulo">
            <ion-icon name="pricetag-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3>Tema</h3>
              <p>{{ item.temaTitulo }}</p>
            </ion-label>
          </ion-item>

          <!-- Fechas -->
          <ion-item *ngIf="item.fechaCreacion">
            <ion-icon name="calendar-outline" slot="start" color="secondary"></ion-icon>
            <ion-label>
              <h3>Creado</h3>
              <p>{{ item.fechaCreacion | date:'medium' }}</p>
            </ion-label>
          </ion-item>

          <ion-item *ngIf="item.fechaModificacion">
            <ion-icon name="create-outline" slot="start" color="tertiary"></ion-icon>
            <ion-label>
              <h3>Modificado</h3>
              <p>{{ item.fechaModificacion | date:'medium' }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Estado vacÃ­o -->
  <ion-card *ngIf="!items || items.length === 0" class="empty-state">
    <ion-card-content class="ion-text-center">
      <ion-icon name="document-text-outline" size="large" color="medium"></ion-icon>
      <p>No tienes diarios creados aÃºn</p>
      <ion-text color="medium">
        <small>Presiona el botÃ³n para cargar desde tu API de Render</small>
      </ion-text>
    </ion-card-content>
  </ion-card>
</ion-content>